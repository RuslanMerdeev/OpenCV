function TmsAd(e,n){function t(){var t=dynamicContent.Test_My_Site_Dog_Feed_Sheet1[0];T.dataObj={frameOne:{copy:t.frame_one,underlineId:t.frame_one_underline_id},frameThree:{copy:t.frame_three,underlineId:t.frame_three_underline_id},frameFive:t.frame_five,frameSix:t.frame_six,inputUrl:t.input_url_copy,width:e,height:n,secondsUntilLast:16500,secondsPerFrame:2500,framesAmount:10,defaultExitUrl:t.default_exit_url.Url,fontSize:t.font_size,errorMessage:t.error_message},T.exitUrl="",T.sprites={},T.runningAnimation=!1,T.dom.adContainer.style.fontSize=T.dataObj.fontSize+"px",Enabler.isPageLoaded()?a():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,a)}function a(){r(),c(),u()}function d(){T.dom={},T.dom.adContainer=document.getElementById("TMS--ad-main-container"),T.dom.adContentContainer=document.getElementById("TMS--ad-content-container")}function o(){T.dom.exitBtns=document.querySelectorAll(".TMS--ad-exit"),T.dom.exitBtnInput=document.getElementById("TMS--ad-exit-btn"),T.dom.inputEl=document.getElementById("TMS--ad-input"),[].forEach.call(T.dom.exitBtns,function(e){e.addEventListener("click",E.onExit,!1)}),T.dom.adContainer.addEventListener("mouseenter",E.onEnter,!1),T.dom.adContainer.addEventListener("mouseleave",E.onLeave,!1),T.dom.exitBtnInput.addEventListener("click",E.onExit,!1),T.dom.inputEl.addEventListener("keyup",i,!1)}function i(e){13===e.keyCode&&E.onExit()}function r(){T.dataObj.defaultExitUrl&&(T.exitUrl=T.dataObj.defaultExitUrl)}function s(e,n){var t="",a="",d=n.split(","),o="";return e.split(" ").forEach(function(e,n){d.forEach(function(t,a){t-1===n&&t&&(o+=e+" ")})}),t=e.split(o)[1],"1"!==n[0]&&(a=e.split(o)[0]),o='<span class="TMS--underline">'+o+"</span> ",t?a+o+t:a+o}function l(){var e="0"===T.dataObj.frameOne.underlineId?T.dataObj.frameOne.copy:s(T.dataObj.frameOne.copy,T.dataObj.frameOne.underlineId),n="0"===T.dataObj.frameThree.underlineId?T.dataObj.frameThree.copy:s(T.dataObj.frameThree.copy,T.dataObj.frameThree.underlineId),t=T.dataObj.frameFive,a=T.dataObj.frameSix;return'<div class="TMS--ad-content TMS--ad-content-1"><p>'+e+'</p></div><div class="TMS--ad-content TMS--ad-content-media TMS--ad-content-2"><video id="TMS--ad-main-video"><source src="'+Enabler.getUrl("main.mp4")+'" type="video/mp4"></source></video></div><div class="TMS--ad-content TMS--ad-content-3"><p>'+n+'</p></div><div class="TMS--ad-content TMS--ad-content-media TMS--ad-content-4"><video id="TMS--ad-phone-video"><source src="'+Enabler.getUrl("phone.mp4")+'" type="video/mp4"></source></video></div><div class="TMS--ad-content TMS--ad-content-5"><p>'+t+'</p></div><div class="TMS--ad-content TMS--ad-content-6"><div class="TMS--ad-exit"></div><p>'+a+'</p><div class="TMS--ad-input"><input id="TMS--ad-input" placeholder="'+T.dataObj.inputUrl+'" type="text"></input><div id="TMS--ad-exit-btn" class="TMS--ad-input-btn"></div></div><div class="TMS--ad-google"></div></div>'}function c(){var e=l();T.dom.adContentContainer.insertAdjacentHTML("beforeend",e),T.dom.frames=document.querySelectorAll(".TMS--ad-content");T.dom.frames[0].querySelectorAll("span"),T.dom.frames[2].querySelectorAll("span"),T.dom.frames[4].querySelectorAll("span"),T.dom.frames[5].querySelectorAll("span");m(T.dom.frames[0],null,20),m(T.dom.frames[1],function(){document.getElementById("TMS--ad-main-video").play()},T.dataObj.secondsPerFrame),m(T.dom.frames[2],null,T.dataObj.secondsPerFrame+4e3),m(T.dom.frames[3],function(){document.getElementById("TMS--ad-phone-video").play()},2*T.dataObj.secondsPerFrame+4e3),m(T.dom.frames[4],function(){T.runningAnimation=!1},2*T.dataObj.secondsPerFrame+9e3),m(T.dom.frames[5],null,T.dataObj.secondsUntilLast),o()}function m(e,n,t){setTimeout(function(){p()||(v(e),n&&n())},t)}function u(){setTimeout(function(){T.dom.adContainer.classList.add("TMS--ad-last-frame")},T.dataObj.secondsUntilLast)}function f(){v(T.dom.frames[T.dom.frames.length-1]),T.dom.adContainer.classList.add("TMS--ad-last-shown")}function p(){return T.dom.adContainer.classList.contains("TMS--ad-last-shown")}function v(e){[].forEach.call(T.dom.frames,function(e){e.classList.remove("TMS--ad-content-current")}),e.classList.add("TMS--ad-content-current")}function S(e){var n=/^(https?:\/\/)?(www\.)?[-a-zA-Z0-9:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&;\(\)\[\]\!\$\*\/\/=]*)$/,t=!0,a=T.dataObj.inputUrl;return T.dom.adContainer.classList.remove("TMS--ad-error"),n.test(e)||(T.dom.adContainer.classList.add("TMS--ad-error"),a=T.dataObj.errorMessage,t=!1),T.dom.inputEl.placeholder=a,t}var T={},E={onEnter:function(){Enabler.counter("creative-hover")},onLeave:function(){Enabler.counter("creative-out")},onExit:function(){var e=T.exitUrl;""===T.dom.inputEl.value?(T.dom.adContainer.classList.remove("TMS--ad-error"),T.dom.inputEl.placeholder=T.dataObj.inputUrl,Enabler.exitOverride("TMS--exit",e)):S(T.dom.inputEl.value)&&(e+="?url="+T.dom.inputEl.value,Enabler.exitOverride("TMS--exit",e)),T.dom.inputEl.blur(),T.dom.inputEl.value="",f()}};return{TMS_preInit:function(){d(),Enabler.isInitialized()?t():Enabler.addEventListener(studio.events.StudioEvent.INIT,t)}}}